(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{2075:function(e,t,r){Promise.resolve().then(r.bind(r,2726))},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return i.a}});var o=r(5250),i=r.n(o)},2726:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var o=r(3827),i=r(4090),n=r(8792);function d(){let[e,t]=(0,i.useState)("write"),[r,d]=(0,i.useState)({title:"",category:"",content:""}),[l,a]=(0,i.useState)({selectedGroup:"교육",newGroupName:"",newCategoryName:""}),[s,c]=(0,i.useState)(""),[p,m]=(0,i.useState)([]),u=()=>{fetch("/api/admin/category").then(e=>e.json()).then(t=>{if(t.groups){m(t.groups);let o=t.groups.find(e=>e.items.length>0);o&&!r.category&&"write"===e&&d(e=>({...e,category:o.items[0]})),"category"===e&&!l.selectedGroup&&t.groups.length>0&&a(e=>({...e,selectedGroup:t.groups[0].title}))}}).catch(e=>console.error(e))};(0,i.useEffect)(()=>(document.documentElement.setAttribute("data-theme","dark"),document.body.style.backgroundColor="#121212",u(),()=>{document.body.style.backgroundColor=""}),[e]);let g=async e=>{e.preventDefault(),c("저장 중...");try{(await fetch("/api/admin/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(c("성공: 포스트 발행 완료!"),d({title:"",category:"",content:""}),u()):c("실패: 포스트 발행 오류")}catch(e){c("오류 발생")}},y=async e=>{e.preventDefault(),c("생성 중...");let t="New Group"===l.selectedGroup?l.newGroupName:l.selectedGroup;if(!t){c("오류: 그룹 이름을 입력해주세요.");return}try{let e=await fetch("/api/admin/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create_category",categoryName:l.newCategoryName,groupTitle:t})}),r=await e.json();e.ok?(c("성공: 메뉴 생성 완료!"),a({selectedGroup:t,newGroupName:"",newCategoryName:""}),u()):c("실패: ".concat(r.error||"알 수 없는 오류"))}catch(e){console.error(e),c("오류 발생")}},x=async(e,t)=>{if(confirm("'".concat(t,"' 메뉴를 삭제하시겠습니까?")))try{await fetch("/api/admin/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete_item",groupTitle:e,categoryName:t})}),u()}catch(e){alert("삭제 실패")}},h=async e=>{if(confirm("'".concat(e,"' 그룹을 삭제하시겠습니까?")))try{await fetch("/api/admin/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete_group",groupTitle:e})}),u()}catch(e){alert("삭제 실패")}};return(0,o.jsx)("div",{style:{minHeight:"100vh",background:"#121212",color:"#ececec",padding:"2rem",position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto",zIndex:9999,"--bg-body":"#121212","--text-primary":"#ececec","--bg-input":"#2d2d2d","--border-color":"#333"},children:(0,o.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #333"},children:[(0,o.jsx)("h1",{style:{margin:0,color:"#ffffff"},children:"블로그 관리"}),(0,o.jsx)(n.default,{href:"/",style:{textDecoration:"none",color:"#aaa",padding:"0.5rem 1rem",border:"1px solid #333",borderRadius:"6px",fontSize:"0.9rem",transition:"all 0.2s"},children:"← 돌아가기"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[(0,o.jsx)("button",{onClick:()=>t("write"),style:{padding:"0.6rem 1.2rem",background:"write"===e?"var(--accent-primary)":"#252525",border:"1px solid #333",borderRadius:"6px",color:"write"===e?"#121212":"#888",cursor:"pointer",fontWeight:"bold"},children:"글쓰기"}),(0,o.jsx)("button",{onClick:()=>t("category"),style:{padding:"0.6rem 1.2rem",background:"category"===e?"var(--accent-primary)":"#252525",border:"1px solid #333",borderRadius:"6px",color:"category"===e?"#121212":"#888",cursor:"pointer",fontWeight:"bold"},children:"메뉴(카테고리) 관리"})]}),s&&(0,o.jsx)("div",{style:{marginBottom:"1rem",padding:"1rem",background:"#2d2d2d",borderRadius:"6px",color:s.includes("실패")||s.includes("오류")?"#ff6b6b":"var(--accent-primary)",border:"1px solid #444"},children:s}),(0,o.jsxs)("div",{style:{background:"#1e1e1e",padding:"2rem",borderRadius:"12px",border:"1px solid #333"},children:["write"===e&&(0,o.jsxs)("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",gap:"1.5rem"},children:[(0,o.jsxs)("div",{style:{flex:2},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa"},children:"제목"}),(0,o.jsx)("input",{type:"text",placeholder:"포스트 제목",value:r.title,onChange:e=>d({...r,title:e.target.value}),style:{width:"100%",padding:"0.8rem",background:"#2d2d2d",border:"1px solid #444",color:"white",borderRadius:"6px",outline:"none"},required:!0})]}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa"},children:"저장할 메뉴"}),(0,o.jsxs)("select",{value:r.category,onChange:e=>d({...r,category:e.target.value}),style:{width:"100%",padding:"0.8rem",background:"#2d2d2d",border:"1px solid #444",color:"white",borderRadius:"6px",outline:"none"},required:!0,children:[(0,o.jsx)("option",{value:"",disabled:!0,children:"메뉴 선택..."}),p.map(e=>(0,o.jsx)("optgroup",{label:e.title,children:e.items.map(e=>(0,o.jsx)("option",{value:e,children:e},e))},e.title))]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa"},children:"내용 (Markdown)"}),(0,o.jsx)("textarea",{placeholder:"내용을 작성하세요...",value:r.content,onChange:e=>d({...r,content:e.target.value}),style:{width:"100%",padding:"1rem",background:"#2d2d2d",border:"1px solid #444",color:"white",borderRadius:"6px",minHeight:"500px",fontFamily:"monospace",lineHeight:"1.6",resize:"vertical",outline:"none"},required:!0})]}),(0,o.jsx)("button",{type:"submit",style:{padding:"1rem",background:"var(--accent-primary)",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",color:"#121212",fontSize:"1rem"},children:"포스트 발행"})]}),"category"===e&&(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"3rem"},children:[(0,o.jsxs)("form",{onSubmit:y,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,o.jsx)("h3",{style:{marginTop:0,color:"#fff",borderLeft:"4px solid var(--accent-primary)",paddingLeft:"10px"},children:"새 메뉴 생성"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end"},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa"},children:"상위 카테고리 (대분류)"}),(0,o.jsxs)("select",{value:l.selectedGroup,onChange:e=>a({...l,selectedGroup:e.target.value}),style:{width:"100%",padding:"0.8rem",background:"#2d2d2d",border:"1px solid #444",color:"white",borderRadius:"6px",outline:"none"},children:[p.map(e=>(0,o.jsx)("option",{value:e.title,children:e.title},e.title)),(0,o.jsx)("option",{value:"New Group",children:"+ 새 상위 카테고리 만들기..."})]})]}),"New Group"===l.selectedGroup&&(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"var(--accent-primary)"},children:"새 그룹 이름 입력"}),(0,o.jsx)("input",{type:"text",placeholder:"예: 보안, 일상",value:l.newGroupName,onChange:e=>a({...l,newGroupName:e.target.value}),style:{width:"100%",padding:"0.8rem",background:"#2d2d2d",border:"1px solid var(--accent-primary)",color:"white",borderRadius:"6px",outline:"none"},autoFocus:!0,required:!0})]}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#aaa"},children:"추가할 메뉴 이름 (소분류)"}),(0,o.jsx)("input",{type:"text",placeholder:"예: Network, React",value:l.newCategoryName,onChange:e=>a({...l,newCategoryName:e.target.value}),style:{width:"100%",padding:"0.8rem",background:"#2d2d2d",border:"1px solid #444",color:"white",borderRadius:"6px",outline:"none"},required:!0})]})]}),(0,o.jsx)("button",{type:"submit",style:{padding:"1rem",background:"var(--accent-primary)",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",color:"#121212",alignSelf:"flex-end",width:"200px"},children:"생성하기"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{marginTop:0,color:"#fff",borderLeft:"4px solid #555",paddingLeft:"10px",marginBottom:"1.5rem"},children:"현재 메뉴 목록"}),0===p.length&&(0,o.jsx)("div",{style:{color:"#666",padding:"1rem"},children:"설정된 그룹이 없습니다."}),(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.5rem"},children:p.map(e=>(0,o.jsxs)("div",{style:{background:"#252525",borderRadius:"8px",padding:"1.5rem",border:"1px solid #333"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #333"},children:[(0,o.jsx)("h4",{style:{margin:0,color:"var(--accent-primary)",fontSize:"1.1rem"},children:e.title}),(0,o.jsx)("button",{onClick:()=>h(e.title),style:{background:"transparent",border:"1px solid #ff4444",color:"#ff4444",borderRadius:"4px",padding:"0.3rem 0.6rem",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"그룹 삭제"})]}),(0,o.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0},children:[0===e.items.length&&(0,o.jsx)("li",{style:{color:"#666",fontSize:"0.9rem",fontStyle:"italic"},children:"(하위 메뉴 없음)"}),e.items.map(t=>(0,o.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",borderBottom:"1px solid #333",fontSize:"0.95rem"},children:[(0,o.jsx)("span",{style:{color:"#ddd"},children:t}),(0,o.jsx)("button",{onClick:()=>x(e.title,t),style:{background:"#333",border:"none",color:"#ccc",borderRadius:"4px",padding:"0.2rem 0.6rem",cursor:"pointer",fontSize:"0.75rem",transition:"background 0.2s"},onMouseOver:e=>e.target.style.background="#444",onMouseOut:e=>e.target.style.background="#333",children:"삭제"})]},t))]})]},e.title))})]})]})]})]})})}}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=2075)}),_N_E=e.O()}]);