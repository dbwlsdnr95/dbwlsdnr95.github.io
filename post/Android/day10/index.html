<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/profile_cute.png"/><link rel="stylesheet" href="/_next/static/css/fff7d7d50ba66cff.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-c5f8510880a90daa.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-c50cb70e7323352b.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-0c59dfdc78baeb85.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-baff347ce7e39457.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-069982e43c2ae463.js" async=""></script><script src="/_next/static/chunks/app/layout-10c7e025b6149e17.js" async=""></script><script src="/_next/static/chunks/app/page-e31ae51de7be232e.js" async=""></script><title>jinwk note</title><meta name="description" content="jinwk dev note"/><script>
              (function() {
                try {
                  const savedTheme = localStorage.getItem('theme');
                  // Default to 'dark' if no save found, ignoring system preference for now to start dark
                  const theme = savedTheme || 'dark';
                  document.documentElement.setAttribute('data-theme', theme);
                } catch (e) {}
              })();
            </script><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><div class="app-container"><aside class="sidebar"><div class="profile-section"><div class="profile-img-wrapper"><img src="/profile_cute.png" alt="Profile" class="profile-img"/></div><div class="profile-name" style="display:flex;align-items:center;justify-content:center;gap:0.5rem">jinwook yu<a style="font-size:0.9rem;opacity:0.5;text-decoration:none" href="/admin/">⚙️</a></div><div class="profile-subtitle" style="font-size:0.9rem;color:var(--text-muted);margin-bottom:1rem">dbwlsdnr95</div><div class="profile-bio" style="white-space:pre-line;font-size:0.85rem;text-align:left;width:100%">웹·모바일 진단 ,솔루션 운영 및 클라우드 보안을 경험했고, 현재는 모의해킹·취약점 분석·CVE 연구에 집중하고 있습니다. 실전 기반 보안 역량을 꾸준히 확장하고 있습니다.</div></div><nav class="nav-section"><div class="nav-title">분류 전체보기</div><ul class="nav-list" style="margin-bottom:2rem"><li class="nav-item"><a class="" href="/">전체보기</a></li></ul><div style="margin-bottom:2rem"><div class="nav-title">교육</div><ul class="nav-list"><li class="nav-item"><a class="" href="/category/Android/">Android</a></li><li class="nav-item"><a class="" href="/category/JAVA/">JAVA</a></li><li class="nav-item"><a class="" href="/category/AWS/">AWS</a></li></ul></div></nav></aside><main class="main-content"><article class="article-container"><div class="article-header"><span class="article-category">Android</span><h1 class="article-title">Android 보안 10일차</h1></div><div class="article-content"><h1>Frida 기반 동적 분석 정리</h1>
<hr>
<h2>1. Frida 기본 개념</h2>
<h3>Frida 구성</h3>
<ul>
<li><strong>frida-server</strong>
<ul>
<li>대상 기기(에뮬레이터/실기기)에서 실행</li>
</ul>
</li>
<li><strong>frida / frida-tools</strong>
<ul>
<li>PC에서 실행</li>
<li>JavaScript 기반 후킹 코드 실행</li>
</ul>
</li>
</ul>
<pre><code>frida -U -l test.js -f 패키지명
</code></pre>
<ul>
<li>Python은 <strong>외부에서 실행</strong></li>
<li>실제 후킹 로직은 <strong>Frida JavaScript 내부에서 동작</strong></li>
</ul>
<pre><code>[ Python (frida CLI) ]  &#x3C;---- IPC ---->  [ Frida JS (App 내부) ]
</code></pre>
<hr>
<h2>2. 메모리 개념 정리</h2>
<h3>문자열 / 메모리 구조</h3>
<pre><code>String key = "1234";
</code></pre>
<ul>
<li>문자열은 메모리에 <strong>char[] 또는 byte[]</strong> 형태로 저장</li>
<li>널 문자(<code>0x00</code>) 포함 가능</li>
</ul>
<p>예시 메모리 표현:</p>
<pre><code>"hacker" -> 68 61 63 6b 65 72 00 00 00 00
"test"   -> 74 65 73 74 00
</code></pre>
<ul>
<li><code>'test[null][null]' == 'test'</code></li>
</ul>
<hr>
<h3>메모리 할당</h3>
<pre><code>Memory.alloc(size)
</code></pre>
<ul>
<li>Native 메모리 직접 할당</li>
<li>문자열, 구조체 직접 생성 가능</li>
</ul>
<pre><code>ptr("0x0000")
new NativePointer("0x0000")
</code></pre>
<hr>
<h2>3. Native 함수 후킹</h2>
<h3>Export 함수 획득</h3>
<pre><code>Module.getExportByName(null, "fopen");
</code></pre>
<ul>
<li><code>null</code> → 현재 프로세스</li>
<li>라이브러리 지정 가능 (예: <code>libc.so</code>, <code>d3d12.dll</code>)</li>
</ul>
<hr>
<h3>Native 함수 인터셉트</h3>
<pre><code>var abc = Module.getExportByName(null, "abc");

Interceptor.attach(abc, {
    onEnter: function (args) {
        // 함수 진입 시
    },
    onLeave: function (retval) {
        // 함수 종료 후
    }
});
</code></pre>
<ul>
<li><code>onEnter</code>: 인자 확인</li>
<li><code>onLeave</code>: 리턴값 조작 가능</li>
</ul>
<hr>
<h3>NativeFunction으로 덮어쓰기</h3>
<pre><code>var newFunc = new NativeFunction(ptr, 'int', ['int', 'int']);
</code></pre>
<ul>
<li>기존 함수를 새 함수로 대체 가능</li>
</ul>
<hr>
<h2>4. Java.use vs Java.choose</h2>
<h3>Java.use()</h3>
<ul>
<li><strong>Class 설계도 자체</strong>를 가져옴</li>
<li>메소드 구현 변경 가능</li>
</ul>
<pre><code>var MainActivity = Java.use("kr.co.eqst.aos.MainActivity");

MainActivity.test.implementation = function (input) {
    this.comp.value = "test";
    return "patched";
};
</code></pre>
<ul>
<li>아직 생성되지 않은 객체에도 적용됨</li>
</ul>
<hr>
<h3>Java.choose()</h3>
<ul>
<li>이미 생성된 <strong>instance 객체</strong>를 가져옴</li>
<li>런타임 상태 변경에 사용</li>
</ul>
<pre><code>Java.choose("kr.co.eqst.aos.app029.MainActivity", {
    onMatch: function (instance) {
        instance.image = "eqst.png";
    }
});
</code></pre>
<ul>
<li>Activity가 이미 생성된 경우 사용</li>
</ul>
<hr>
<h2>5. Activity 생성 시점 정리</h2>
<pre><code>MainActivity ma = new MainActivity();
</code></pre>
<ul>
<li><code>$new</code> → 새 인스턴스 생성</li>
<li><code>Java.choose()</code> → 기존 인스턴스 접근</li>
</ul>
<table>
<thead>
<tr>
<th>상황</th>
<th>사용</th>
</tr>
</thead>
<tbody>
<tr>
<td>Activity 미생성</td>
<td>Java.use + $new</td>
</tr>
<tr>
<td>Activity 생성됨</td>
<td>Java.choose</td>
</tr>
</tbody>
</table>
<hr>
<h2>6. Smali 조건 분기 정리</h2>
<pre><code>if-eq v0, v1      같으면 분기
if-neq v0, v1     다르면 분기
if-eqz v0         v0 == 0
if-nez v0         v0 != 0
if-lt v0, v1      v0 &#x3C; v1
if-le v0, v1      v0 &#x3C;= v1
if-gt v0, v1      v0 > v1
if-ge v0, v1      v0 >= v1
if-ltz v0         v0 &#x3C; 0
if-lez v0         v0 &#x3C;= 0
if-gtz v0         v0 > 0
if-gez v0         v0 >= 0
goto              무조건 점프
</code></pre>
<hr>
<h2>7. 무결성 및 탐지 우회</h2>
<h3>동적 분석 특징</h3>
<ul>
<li>실행 중 로직 변경 가능</li>
<li>무결성 검증, 디버깅 탐지 우회 가능</li>
</ul>
<h3>우회 대상</h3>
<ul>
<li>Frida 탐지</li>
<li>gdb / lldb 탐지</li>
<li>CRC 무결성 체크</li>
</ul>
<hr>
<h3>예시: Kotlin Intrinsics 우회</h3>
<pre><code>Java.perform(() => {
    var Intrinsics = Java.use("kotlin.jvm.internal.Intrinsics");

    Intrinsics.areEqual.overload(
        'java.lang.Object',
        'java.lang.Object'
    ).implementation = function (a, b) {

        if (a.toString() !== 'x86_64') {
            return this.areEqual(a, b);
        } else {
            return true;
        }
    };
});
</code></pre>
<hr>
<h3>CRC 무결성 우회</h3>
<pre><code>var Zip = Java.use("java.util.zip.ZipEntry");

Zip.getCrc.implementation = function () {
    return 1302005358;
};
</code></pre>
<hr>
<h2>8. UI 제어 주의 사항</h2>
<ul>
<li>UI 관련 함수는 <strong>Main Thread</strong>에서 실행해야 함</li>
</ul>
<pre><code>Java.scheduleOnMainThread(function () {
    Java.choose("kr.co.eqst.aos.app029.MainActivity", {
        onMatch: function (instance) {
            instance.integritycheck();
        }
    });
});
</code></pre>
<hr>
<h2>9. Cheat Engine 개념 비교</h2>
<ul>
<li>메모리 스캔</li>
<li>값 검색 → 필터링 → 덮어쓰기</li>
<li>게임 치트, 값 고정에 사용</li>
</ul>
<pre><code>전체 메모리에서 값 05 검색
→ 현재 값 03만 필터
→ 특정 주소 덮어쓰기
</code></pre>
<hr>
<h2>10. APK / IPA 구조</h2>
<ul>
<li>APK = ZIP</li>
<li>IPA = ZIP</li>
<li>내부 바이너리
<ul>
<li>Android: <code>classes.dex</code></li>
<li>iOS: ELF / Mach-O 바이너리</li>
</ul>
</li>
</ul>
<hr>
<h2>11. Frida 실습 대상</h2>
<h3>FridaLab</h3>
<ul>
<li>Google 검색: <code>fridalab ross</code></li>
<li>첫 번째 사이트에서 다운로드</li>
<li>Frida 실습용 공식 앱</li>
</ul>
<hr>
<h2>12. 핵심 요약</h2>
<ul>
<li>Frida는 <strong>런타임 분석 도구</strong></li>
<li>Java.use = 설계도 수정</li>
<li>Java.choose = 이미 생성된 객체 제어</li>
<li>Native / Java 후킹 모두 가능</li>
<li>무결성·탐지 로직 우회 가능</li>
<li>정적 분석 + 동적 분석 병행 필수</li>
</ul>
</div></article></main></div><script src="/_next/static/chunks/webpack-c5f8510880a90daa.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/fff7d7d50ba66cff.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:I[7690,[],\"\"]\n6:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\na:I[8383,[\"250\",\"static/chunks/250-069982e43c2ae463.js\",\"185\",\"static/chunks/app/layout-10c7e025b6149e17.js\"],\"\"]\nb:I[5250,[\"250\",\"static/chunks/250-069982e43c2ae463.js\",\"931\",\"static/chunks/app/page-e31ae51de7be232e.js\"],\"\"]\nd:I[8955,[],\"\"]\n7:[\"category\",\"Android\",\"d\"]\n8:[\"slug\",\"day10\",\"d\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/fff7d7d50ba66cff.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"2BDZlJ6cDPI6q5M9NRLC3\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/post/Android/day10/\",\"initialTree\":[\"\",{\"children\":[\"post\",{\"children\":[[\"category\",\"Android\",\"d\"],{\"children\":[[\"slug\",\"day10\",\"d\"],{\"children\":[\"__PAGE__?{\\\"category\\\":\\\"Android\\\",\\\"slug\\\":\\\"day10\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"post\",{\"children\":[[\"category\",\"Android\",\"d\"],{\"children\":[[\"slug\",\"day10\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L4\",\"$L5\",null]]},[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\",\"$7\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\",\"$7\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"post\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"html\",null,{\"lang\":\"ko\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n              (function() {\\n                try {\\n                  const savedTheme = localStorage.getItem('theme');\\n                  // Default to 'dark' if no save found, ignoring system preference for now to start dark\\n                  const theme = savedTheme || 'dark';\\n                  document.documentElement.setAttribute('data-theme', theme);\\n                } catch (e) {}\\n              })();\\n            \"}}]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"app-container\",\"children\":[[\"$\",\"$La\",null,{\"categories\":[\"AWS\",\"Android\",\"JAVA\"]}],[\"$\",\"main\",null,{\"className\":\"main-content\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center justify-center min-h-[60vh] text-center px-4\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-4xl font-bold mb-4\",\"children\":\"404 - Not Found\"}],[\"$\",\"p\",null,{\"className\":\"text-gray-500 mb-8\",\"children\":\"요청하신 페이지를 찾을 수 없습니다.\"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"className\":\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\",\"children\":\"홈으로 돌아가기\"}]]}],\"notFoundStyles\":[],\"styles\":null}]}]]}]}]]}],null]],\"initialHead\":[false,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]]\n"])</script><script>self.__next_f.push([1,"f:T18d0,"])</script><script>self.__next_f.push([1,"\u003ch1\u003eFrida 기반 동적 분석 정리\u003c/h1\u003e\n\u003chr\u003e\n\u003ch2\u003e1. Frida 기본 개념\u003c/h2\u003e\n\u003ch3\u003eFrida 구성\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003efrida-server\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e대상 기기(에뮬레이터/실기기)에서 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003efrida / frida-tools\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003ePC에서 실행\u003c/li\u003e\n\u003cli\u003eJavaScript 기반 후킹 코드 실행\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003efrida -U -l test.js -f 패키지명\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003ePython은 \u003cstrong\u003e외부에서 실행\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e실제 후킹 로직은 \u003cstrong\u003eFrida JavaScript 내부에서 동작\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003e[ Python (frida CLI) ]  \u0026#x3C;---- IPC ----\u003e  [ Frida JS (App 내부) ]\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003e2. 메모리 개념 정리\u003c/h2\u003e\n\u003ch3\u003e문자열 / 메모리 구조\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003eString key = \"1234\";\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e문자열은 메모리에 \u003cstrong\u003echar[] 또는 byte[]\u003c/strong\u003e 형태로 저장\u003c/li\u003e\n\u003cli\u003e널 문자(\u003ccode\u003e0x00\u003c/code\u003e) 포함 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e예시 메모리 표현:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\"hacker\" -\u003e 68 61 63 6b 65 72 00 00 00 00\r\n\"test\"   -\u003e 74 65 73 74 00\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e'test[null][null]' == 'test'\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e메모리 할당\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003eMemory.alloc(size)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eNative 메모리 직접 할당\u003c/li\u003e\n\u003cli\u003e문자열, 구조체 직접 생성 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eptr(\"0x0000\")\r\nnew NativePointer(\"0x0000\")\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003e3. Native 함수 후킹\u003c/h2\u003e\n\u003ch3\u003eExport 함수 획득\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003eModule.getExportByName(null, \"fopen\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003enull\u003c/code\u003e → 현재 프로세스\u003c/li\u003e\n\u003cli\u003e라이브러리 지정 가능 (예: \u003ccode\u003elibc.so\u003c/code\u003e, \u003ccode\u003ed3d12.dll\u003c/code\u003e)\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eNative 함수 인터셉트\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003evar abc = Module.getExportByName(null, \"abc\");\r\n\r\nInterceptor.attach(abc, {\r\n    onEnter: function (args) {\r\n        // 함수 진입 시\r\n    },\r\n    onLeave: function (retval) {\r\n        // 함수 종료 후\r\n    }\r\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eonEnter\u003c/code\u003e: 인자 확인\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eonLeave\u003c/code\u003e: 리턴값 조작 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eNativeFunction으로 덮어쓰기\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003evar newFunc = new NativeFunction(ptr, 'int', ['int', 'int']);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e기존 함수를 새 함수로 대체 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e4. Java.use vs Java.choose\u003c/h2\u003e\n\u003ch3\u003eJava.use()\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eClass 설계도 자체\u003c/strong\u003e를 가져옴\u003c/li\u003e\n\u003cli\u003e메소드 구현 변경 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003evar MainActivity = Java.use(\"kr.co.eqst.aos.MainActivity\");\r\n\r\nMainActivity.test.implementation = function (input) {\r\n    this.comp.value = \"test\";\r\n    return \"patched\";\r\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e아직 생성되지 않은 객체에도 적용됨\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003eJava.choose()\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e이미 생성된 \u003cstrong\u003einstance 객체\u003c/strong\u003e를 가져옴\u003c/li\u003e\n\u003cli\u003e런타임 상태 변경에 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eJava.choose(\"kr.co.eqst.aos.app029.MainActivity\", {\r\n    onMatch: function (instance) {\r\n        instance.image = \"eqst.png\";\r\n    }\r\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eActivity가 이미 생성된 경우 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e5. Activity 생성 시점 정리\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003eMainActivity ma = new MainActivity();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e$new\u003c/code\u003e → 새 인스턴스 생성\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eJava.choose()\u003c/code\u003e → 기존 인스턴스 접근\u003c/li\u003e\n\u003c/ul\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e상황\u003c/th\u003e\n\u003cth\u003e사용\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eActivity 미생성\u003c/td\u003e\n\u003ctd\u003eJava.use + $new\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eActivity 생성됨\u003c/td\u003e\n\u003ctd\u003eJava.choose\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003chr\u003e\n\u003ch2\u003e6. Smali 조건 분기 정리\u003c/h2\u003e\n\u003cpre\u003e\u003ccode\u003eif-eq v0, v1      같으면 분기\r\nif-neq v0, v1     다르면 분기\r\nif-eqz v0         v0 == 0\r\nif-nez v0         v0 != 0\r\nif-lt v0, v1      v0 \u0026#x3C; v1\r\nif-le v0, v1      v0 \u0026#x3C;= v1\r\nif-gt v0, v1      v0 \u003e v1\r\nif-ge v0, v1      v0 \u003e= v1\r\nif-ltz v0         v0 \u0026#x3C; 0\r\nif-lez v0         v0 \u0026#x3C;= 0\r\nif-gtz v0         v0 \u003e 0\r\nif-gez v0         v0 \u003e= 0\r\ngoto              무조건 점프\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003e7. 무결성 및 탐지 우회\u003c/h2\u003e\n\u003ch3\u003e동적 분석 특징\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e실행 중 로직 변경 가능\u003c/li\u003e\n\u003cli\u003e무결성 검증, 디버깅 탐지 우회 가능\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e우회 대상\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eFrida 탐지\u003c/li\u003e\n\u003cli\u003egdb / lldb 탐지\u003c/li\u003e\n\u003cli\u003eCRC 무결성 체크\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch3\u003e예시: Kotlin Intrinsics 우회\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003eJava.perform(() =\u003e {\r\n    var Intrinsics = Java.use(\"kotlin.jvm.internal.Intrinsics\");\r\n\r\n    Intrinsics.areEqual.overload(\r\n        'java.lang.Object',\r\n        'java.lang.Object'\r\n    ).implementation = function (a, b) {\r\n\r\n        if (a.toString() !== 'x86_64') {\r\n            return this.areEqual(a, b);\r\n        } else {\r\n            return true;\r\n        }\r\n    };\r\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch3\u003eCRC 무결성 우회\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003evar Zip = Java.use(\"java.util.zip.ZipEntry\");\r\n\r\nZip.getCrc.implementation = function () {\r\n    return 1302005358;\r\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003e8. UI 제어 주의 사항\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eUI 관련 함수는 \u003cstrong\u003eMain Thread\u003c/strong\u003e에서 실행해야 함\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eJava.scheduleOnMainThread(function () {\r\n    Java.choose(\"kr.co.eqst.aos.app029.MainActivity\", {\r\n        onMatch: function (instance) {\r\n            instance.integritycheck();\r\n        }\r\n    });\r\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003e9. Cheat Engine 개념 비교\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e메모리 스캔\u003c/li\u003e\n\u003cli\u003e값 검색 → 필터링 → 덮어쓰기\u003c/li\u003e\n\u003cli\u003e게임 치트, 값 고정에 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003e전체 메모리에서 값 05 검색\r\n→ 현재 값 03만 필터\r\n→ 특정 주소 덮어쓰기\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003e10. APK / IPA 구조\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAPK = ZIP\u003c/li\u003e\n\u003cli\u003eIPA = ZIP\u003c/li\u003e\n\u003cli\u003e내부 바이너리\n\u003cul\u003e\n\u003cli\u003eAndroid: \u003ccode\u003eclasses.dex\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eiOS: ELF / Mach-O 바이너리\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e11. Frida 실습 대상\u003c/h2\u003e\n\u003ch3\u003eFridaLab\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eGoogle 검색: \u003ccode\u003efridalab ross\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e첫 번째 사이트에서 다운로드\u003c/li\u003e\n\u003cli\u003eFrida 실습용 공식 앱\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003ch2\u003e12. 핵심 요약\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eFrida는 \u003cstrong\u003e런타임 분석 도구\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eJava.use = 설계도 수정\u003c/li\u003e\n\u003cli\u003eJava.choose = 이미 생성된 객체 제어\u003c/li\u003e\n\u003cli\u003eNative / Java 후킹 모두 가능\u003c/li\u003e\n\u003cli\u003e무결성·탐지 로직 우회 가능\u003c/li\u003e\n\u003cli\u003e정적 분석 + 동적 분석 병행 필수\u003c/li\u003e\n\u003c/ul\u003e\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"article\",null,{\"className\":\"article-container\",\"children\":[[\"$\",\"div\",null,{\"className\":\"article-header\",\"children\":[[\"$\",\"span\",null,{\"className\":\"article-category\",\"children\":\"Android\"}],[\"$\",\"h1\",null,{\"className\":\"article-title\",\"children\":\"Android 보안 10일차\"}]]}],[\"$\",\"div\",null,{\"className\":\"article-content\",\"dangerouslySetInnerHTML\":{\"__html\":\"$f\"}}]]}]\nc:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"titl"])</script><script>self.__next_f.push([1,"e\",\"2\",{\"children\":\"jinwk note\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"jinwk dev note\"}]]\n4:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>