3:I[5613,[],""]
6:I[1778,[],""]
7:I[8383,["250","static/chunks/250-069982e43c2ae463.js","185","static/chunks/app/layout-ada0ccfdc2732042.js"],""]
4:["category","Android","d"]
5:["slug","day7","d"]
0:["Abs63gimMocH9GC6KfM8u",[[["",{"children":["post",{"children":[["category","Android","d"],{"children":[["slug","day7","d"],{"children":["__PAGE__?{\"category\":\"Android\",\"slug\":\"day7\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["post",{"children":[["category","Android","d"],{"children":[["slug","day7","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","post","children","$4","children","$5","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","post","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","post","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":[["$","head",null,{"children":["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\n              (function() {\n                try {\n                  const savedTheme = localStorage.getItem('theme');\n                  // Default to 'dark' if no save found, ignoring system preference for now to start dark\n                  const theme = savedTheme || 'dark';\n                  document.documentElement.setAttribute('data-theme', theme);\n                } catch (e) {}\n              })();\n            "}}]}],["$","body",null,{"children":["$","div",null,{"className":"app-container","children":[["$","$L7",null,{"categories":["AWS","Android","JAVA"]}],["$","main",null,{"className":"main-content","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/fff7d7d50ba66cff.css","precedence":"next","crossOrigin":""}]],"$L8"]]]]
9:T15d6,<h1>Android Security – (정적 분석)</h1>
<blockquote>
<p><strong>정적 분석(Static Analysis)</strong>
앱을 실행하지 않은 상태에서 <strong>APK를 디컴파일</strong>하여 내부 로직, 암호화 방식, 검증 로직 등을 분석하는 기법</p>
</blockquote>
<hr>
<h2>1. 정적 분석 개요</h2>
<ul>
<li>앱 <strong>미실행 상태</strong></li>
<li>APK → 디컴파일 → 코드 분석</li>
<li>주요 분석 대상
<ul>
<li>Java / Kotlin 코드</li>
<li>Smali 코드</li>
<li>AndroidManifest.xml</li>
<li>암호화 로직</li>
<li>하드코딩된 키 / 힌트</li>
</ul>
</li>
</ul>
<hr>
<h2>2. Smali 코드 분석</h2>
<h3>2.1 Smali란?</h3>
<ul>
<li>Dalvik VM용 어셈블리 코드</li>
<li><strong>ASM(어셈블리)와 유사</strong></li>
<li><code>classes.dex</code> → smali 변환</li>
</ul>
<pre><code>add v0, v1
sub v2, v3
jmp :label
</code></pre>
<hr>
<h3>2.2 Null 체크 코드</h3>
<pre><code>Intrinsics.checkNotNullParameter(obj, "param");
</code></pre>
<ul>
<li>Kotlin에서 자동 생성</li>
<li><strong>의미</strong>
<ul>
<li>검증 로직이 많다는 뜻</li>
<li>단순 NPE 방지용</li>
</ul>
</li>
<li>디버깅 시 <strong>노이즈가 많아짐</strong></li>
<li>보안 검증과 직접적인 연관은 적음</li>
</ul>
<hr>
<h2>3. Java 코드 정적 분석 흐름</h2>
<h3>3.1 기본 분석 순서</h3>
<pre><code>AndroidManifest.xml
 → Activity 선언
   → onCreate()
     → onClick()
       → 특정 메소드 / 로직
</code></pre>
<hr>
<h3>3.2 함수 호출 관계 추적</h3>
<pre><code>function(arg1, arg2, arg3)
</code></pre>
<ul>
<li>분석 포인트
<ul>
<li>이 함수는 <strong>어디서 호출되는가</strong></li>
<li>외부 입력값이 전달되는가</li>
<li>Intent / Extra 포함 여부</li>
</ul>
</li>
</ul>
<hr>
<h3>3.3 클래스 구조</h3>
<pre><code>Intent intent = new Intent(this, MainActivity.class);
Class → Instance
new Class()
</code></pre>
<ul>
<li>Activity는 <strong>클래스 기반 객체</strong></li>
<li>외부 Intent 조작 가능성 확인</li>
</ul>
<hr>
<h2>4. 정적 분석 실습 1 – ASCII 배열 복원</h2>
<ul>
<li>ASCII 값 배열 → 문자열 변환</li>
<li>암호화 힌트 은닉용으로 자주 사용</li>
</ul>
<pre><code>[65, 66, 67] → "ABC"
</code></pre>
<hr>
<h2>5. 정적 분석 실습 2 – XOR 기반 암호화 분석</h2>
<h3>5.1 코드 핵심</h3>
<pre><code>UIStyles.INSTANCE.showMessageDialog(
  mainActivity,
  "HINT",
  "appPkg: aos\nTEST_HEX: " +
  encrypter.bytesToHex(
    encrypter2.encrypt(bytes, bArrDeriveKey4)
  )
);
</code></pre>
<hr>
<h3>5.2 키 생성 로직 분석</h3>
<pre><code>String str = appPkg + ":" + hint;
// "aos:CUSTOM_XOR_V1"
byte[] bytes = str.getBytes(UTF_8);
int iCrc32 = crc32(bytes);
</code></pre>
<ul>
<li>CRC32 체크섬 계산</li>
<li>결과값에서 <strong>4바이트만 키로 사용</strong></li>
</ul>
<pre><code>return new byte[]{
  (byte)((iCrc32 >>> 24) &#x26; 255),
  (byte)((iCrc32 >>> 16) &#x26; 255),
  (byte)((iCrc32 >>> 8) &#x26; 255),
  (byte)(iCrc32 &#x26; 255)
};
</code></pre>
<h3>5.3 최종 키</h3>
<pre><code>KEY = [f6, 70, 77, 23]
</code></pre>
<hr>
<h3>5.4 XOR 암호화 원리</h3>
<h4>논리 연산 정리</h4>
<p>| 연산    | 설명               |
| ------- | ------------------ |
| AND (&#x26;) | 둘 다 참일 때만 참 |
| OR (    | )                  |
| XOR (^) | 서로 다를 때만 참  |</p>
<pre><code>X ^ X = 0
X ^ 0 = X
(X ^ K) ^ K = X
</code></pre>
<hr>
<h3>5.5 암호화 로직</h3>
<pre><code>for (int i = 0; i &#x3C; length; i++) {
  bArr[i] =
    (byte)(
      (
        (key4[i &#x26; 3] + (i * 11)) &#x26; 255
      ) ^ plain[i]
    );
}
</code></pre>
<ul>
<li>키는 4바이트 반복 사용</li>
<li><code>i * 11</code> 값이 가변성 추가</li>
<li><strong>XOR → 복호화도 동일 로직</strong></li>
</ul>
<hr>
<h2>6. 정적 분석 실습 3 – AES 고정 키/IV</h2>
<h3>6.1 코드</h3>
<pre><code>byte[] key = "0123456789abcdef".getBytes();
byte[] iv  = "fedcba0123456789".getBytes();

cipher.init(
  Cipher.ENCRYPT_MODE,
  new SecretKeySpec(key, "AES"),
  new IvParameterSpec(iv)
);
</code></pre>
<ul>
<li>알고리즘: <strong>AES/CBC/PKCS5Padding</strong></li>
<li>키 &#x26; IV 하드코딩</li>
</ul>
<hr>
<h3>6.2 복호화 절차</h3>
<ol>
<li>Base64 디코딩</li>
<li>AES 복호화</li>
<li>결과 평문 획득</li>
</ol>
<pre><code>암호문: tq3mPVo8iY+xHYFinxgt/A==
평문: decrypt_easy
</code></pre>
<hr>
<h2>7. 정적 분석 실습 4 – IV 포함 암호문 구조</h2>
<h3>7.1 암호문 구조</h3>
<pre><code>[ IV (16 bytes) ][ 암호화 데이터 ]
iDigXohA4nl1YXWRdNo0LaecV/7XAfeEjRjfyga8OzMS7rxHBmsm5wz/HjTQkqiY
</code></pre>
<hr>
<h3>7.2 복호화 절차</h3>
<ol>
<li>Base64 디코딩</li>
<li>앞 16바이트 → IV</li>
<li>나머지 → CipherText</li>
<li>AES/CBC/PKCS5Padding 복호화</li>
</ol>
<pre><code>Key: 0123456789abcdef
IV : 암호문 앞 16바이트
</code></pre>
<hr>
<h2>8. 정적 분석 핵심 체크리스트</h2>
<p>AndroidManifest 내 Exported Activity
Intent Extra 권한 검증 여부
하드코딩 키 / IV
XOR / CRC32 기반 커스텀 암호화
복호화 가능 여부
힌트 문자열 UI 노출 여부</p>
<hr>
<h2>9. 핵심 요약</h2>
<ul>
<li>정적 분석은 <strong>로직을 이해하는 싸움</strong></li>
<li>암호화라도 <strong>키가 노출되면 무의미</strong></li>
<li>XOR 기반 암호화는 대부분 <strong>즉시 복호화 가능</strong></li>
<li>AES라도 <strong>키/IV 하드코딩은 치명적</strong></li>
</ul>
2:["$","article",null,{"className":"article-container","children":[["$","div",null,{"className":"article-header","children":[["$","span",null,{"className":"article-category","children":"Android"}],["$","h1",null,{"className":"article-title","children":"Android 보안 7일차"}]]}],["$","div",null,{"className":"article-content","dangerouslySetInnerHTML":{"__html":"$9"}}]]}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"jinwk note"}],["$","meta","3",{"name":"description","content":"jinwk dev note"}]]
1:null
