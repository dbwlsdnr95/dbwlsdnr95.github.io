3:I[5613,[],""]
6:I[1778,[],""]
7:I[8383,["250","static/chunks/250-63ba7a57e29c9f6e.js","185","static/chunks/app/layout-ada0ccfdc2732042.js"],""]
4:["category","Android","d"]
5:["slug","day10","d"]
0:["UQ-na9S7VveNwpUsd699O",[[["",{"children":["post",{"children":[["category","Android","d"],{"children":[["slug","day10","d"],{"children":["__PAGE__?{\"category\":\"Android\",\"slug\":\"day10\"}",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["post",{"children":[["category","Android","d"],{"children":[["slug","day10","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","post","children","$4","children","$5","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","post","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","post","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"children":[["$","head",null,{"children":["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\n              (function() {\n                try {\n                  const savedTheme = localStorage.getItem('theme');\n                  // Default to 'dark' if no save found, ignoring system preference for now to start dark\n                  const theme = savedTheme || 'dark';\n                  document.documentElement.setAttribute('data-theme', theme);\n                } catch (e) {}\n              })();\n            "}}]}],["$","body",null,{"children":["$","div",null,{"className":"app-container","children":[["$","$L7",null,{"categories":["AWS","Android","JAVA"]}],["$","main",null,{"className":"main-content","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/blog/_next/static/css/fff7d7d50ba66cff.css","precedence":"next","crossOrigin":""}]],"$L8"]]]]
9:T18a2,<h1>Frida 기반 동적 분석 정리</h1>
<hr>
<h2>1. Frida 기본 개념</h2>
<h3>Frida 구성</h3>
<ul>
<li><strong>frida-server</strong>
<ul>
<li>대상 기기(에뮬레이터/실기기)에서 실행</li>
</ul>
</li>
<li><strong>frida / frida-tools</strong>
<ul>
<li>PC에서 실행</li>
<li>JavaScript 기반 후킹 코드 실행</li>
</ul>
</li>
</ul>
<pre><code>frida -U -l test.js -f 패키지명
</code></pre>
<ul>
<li>Python은 <strong>외부에서 실행</strong></li>
<li>실제 후킹 로직은 <strong>Frida JavaScript 내부에서 동작</strong></li>
</ul>
<pre><code>[ Python (frida CLI) ]  &#x3C;---- IPC ---->  [ Frida JS (App 내부) ]
</code></pre>
<hr>
<h2>2. 메모리 개념 정리</h2>
<h3>문자열 / 메모리 구조</h3>
<pre><code>String key = "1234";
</code></pre>
<ul>
<li>문자열은 메모리에 <strong>char[] 또는 byte[]</strong> 형태로 저장</li>
<li>널 문자(<code>0x00</code>) 포함 가능</li>
</ul>
<p>예시 메모리 표현:</p>
<pre><code>"hacker" -> 68 61 63 6b 65 72 00 00 00 00
"test"   -> 74 65 73 74 00
</code></pre>
<ul>
<li><code>'test[null][null]' == 'test'</code></li>
</ul>
<hr>
<h3>메모리 할당</h3>
<pre><code>Memory.alloc(size)
</code></pre>
<ul>
<li>Native 메모리 직접 할당</li>
<li>문자열, 구조체 직접 생성 가능</li>
</ul>
<pre><code>ptr("0x0000")
new NativePointer("0x0000")
</code></pre>
<hr>
<h2>3. Native 함수 후킹</h2>
<h3>Export 함수 획득</h3>
<pre><code>Module.getExportByName(null, "fopen");
</code></pre>
<ul>
<li><code>null</code> → 현재 프로세스</li>
<li>라이브러리 지정 가능 (예: <code>libc.so</code>, <code>d3d12.dll</code>)</li>
</ul>
<hr>
<h3>Native 함수 인터셉트</h3>
<pre><code>var abc = Module.getExportByName(null, "abc");

Interceptor.attach(abc, {
    onEnter: function (args) {
        // 함수 진입 시
    },
    onLeave: function (retval) {
        // 함수 종료 후
    }
});
</code></pre>
<ul>
<li><code>onEnter</code>: 인자 확인</li>
<li><code>onLeave</code>: 리턴값 조작 가능</li>
</ul>
<hr>
<h3>NativeFunction으로 덮어쓰기</h3>
<pre><code>var newFunc = new NativeFunction(ptr, 'int', ['int', 'int']);
</code></pre>
<ul>
<li>기존 함수를 새 함수로 대체 가능</li>
</ul>
<hr>
<h2>4. Java.use vs Java.choose</h2>
<h3>Java.use()</h3>
<ul>
<li><strong>Class 설계도 자체</strong>를 가져옴</li>
<li>메소드 구현 변경 가능</li>
</ul>
<pre><code>var MainActivity = Java.use("kr.co.eqst.aos.MainActivity");

MainActivity.test.implementation = function (input) {
    this.comp.value = "test";
    return "patched";
};
</code></pre>
<ul>
<li>아직 생성되지 않은 객체에도 적용됨</li>
</ul>
<hr>
<h3>Java.choose()</h3>
<ul>
<li>이미 생성된 <strong>instance 객체</strong>를 가져옴</li>
<li>런타임 상태 변경에 사용</li>
</ul>
<pre><code>Java.choose("kr.co.eqst.aos.app029.MainActivity", {
    onMatch: function (instance) {
        instance.image = "eqst.png";
    }
});
</code></pre>
<ul>
<li>Activity가 이미 생성된 경우 사용</li>
</ul>
<hr>
<h2>5. Activity 생성 시점 정리</h2>
<pre><code>MainActivity ma = new MainActivity();
</code></pre>
<ul>
<li><code>$new</code> → 새 인스턴스 생성</li>
<li><code>Java.choose()</code> → 기존 인스턴스 접근</li>
</ul>
<p>| 상황            | 사용            |
| --------------- | --------------- |
| Activity 미생성 | Java.use + $new |
| Activity 생성됨 | Java.choose     |</p>
<hr>
<h2>6. Smali 조건 분기 정리</h2>
<pre><code>if-eq v0, v1      같으면 분기
if-neq v0, v1     다르면 분기
if-eqz v0         v0 == 0
if-nez v0         v0 != 0
if-lt v0, v1      v0 &#x3C; v1
if-le v0, v1      v0 &#x3C;= v1
if-gt v0, v1      v0 > v1
if-ge v0, v1      v0 >= v1
if-ltz v0         v0 &#x3C; 0
if-lez v0         v0 &#x3C;= 0
if-gtz v0         v0 > 0
if-gez v0         v0 >= 0
goto              무조건 점프
</code></pre>
<hr>
<h2>7. 무결성 및 탐지 우회</h2>
<h3>동적 분석 특징</h3>
<ul>
<li>실행 중 로직 변경 가능</li>
<li>무결성 검증, 디버깅 탐지 우회 가능</li>
</ul>
<h3>우회 대상</h3>
<ul>
<li>Frida 탐지</li>
<li>gdb / lldb 탐지</li>
<li>CRC 무결성 체크</li>
</ul>
<hr>
<h3>예시: Kotlin Intrinsics 우회</h3>
<pre><code>Java.perform(() => {
    var Intrinsics = Java.use("kotlin.jvm.internal.Intrinsics");

    Intrinsics.areEqual.overload(
        'java.lang.Object',
        'java.lang.Object'
    ).implementation = function (a, b) {

        if (a.toString() !== 'x86_64') {
            return this.areEqual(a, b);
        } else {
            return true;
        }
    };
});
</code></pre>
<hr>
<h3>CRC 무결성 우회</h3>
<pre><code>var Zip = Java.use("java.util.zip.ZipEntry");

Zip.getCrc.implementation = function () {
    return 1302005358;
};
</code></pre>
<hr>
<h2>8. UI 제어 주의 사항</h2>
<ul>
<li>UI 관련 함수는 <strong>Main Thread</strong>에서 실행해야 함</li>
</ul>
<pre><code>Java.scheduleOnMainThread(function () {
    Java.choose("kr.co.eqst.aos.app029.MainActivity", {
        onMatch: function (instance) {
            instance.integritycheck();
        }
    });
});
</code></pre>
<hr>
<h2>9. Cheat Engine 개념 비교</h2>
<ul>
<li>메모리 스캔</li>
<li>값 검색 → 필터링 → 덮어쓰기</li>
<li>게임 치트, 값 고정에 사용</li>
</ul>
<pre><code>전체 메모리에서 값 05 검색
→ 현재 값 03만 필터
→ 특정 주소 덮어쓰기
</code></pre>
<hr>
<h2>10. APK / IPA 구조</h2>
<ul>
<li>APK = ZIP</li>
<li>IPA = ZIP</li>
<li>내부 바이너리
<ul>
<li>Android: <code>classes.dex</code></li>
<li>iOS: ELF / Mach-O 바이너리</li>
</ul>
</li>
</ul>
<hr>
<h2>11. Frida 실습 대상</h2>
<h3>FridaLab</h3>
<ul>
<li>Google 검색: <code>fridalab ross</code></li>
<li>첫 번째 사이트에서 다운로드</li>
<li>Frida 실습용 공식 앱</li>
</ul>
<hr>
<h2>12. 핵심 요약</h2>
<ul>
<li>Frida는 <strong>런타임 분석 도구</strong></li>
<li>Java.use = 설계도 수정</li>
<li>Java.choose = 이미 생성된 객체 제어</li>
<li>Native / Java 후킹 모두 가능</li>
<li>무결성·탐지 로직 우회 가능</li>
<li>정적 분석 + 동적 분석 병행 필수</li>
</ul>
2:["$","article",null,{"className":"article-container","children":[["$","div",null,{"className":"article-header","children":[["$","span",null,{"className":"article-category","children":"Android"}],["$","h1",null,{"className":"article-title","children":"Android 보안 10일차"}]]}],["$","div",null,{"className":"article-content","dangerouslySetInnerHTML":{"__html":"$9"}}]]}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"jinwk note"}],["$","meta","3",{"name":"description","content":"jinwk dev note"}]]
1:null
